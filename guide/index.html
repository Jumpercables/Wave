<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="no-js ie6"><![endif]-->
<!--[if IE 7 ]><html class="no-js ie7"><![endif]-->
<!--[if IE 8 ]><html class="no-js ie8"><![endif]-->
<!--[if IE 9 ]><html class="no-js ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    
      
        <title>Developer Guide - Wave</title>
      
      
      
      
        <meta name="author" content="Kyle Baesler">
      
    
    <meta property="og:url" content="None">
    <meta property="og:title" content="Wave">
    <meta property="og:image" content="None/../">
    <meta name="apple-mobile-web-app-title" content="Wave">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    
    <link rel="shortcut icon" type="image/x-icon" href="../None">
    <link rel="icon" type="image/x-icon" href="../None">
    <style>
      @font-face {
      	font-family: 'Icon';
      	src: url('../assets/fonts/icon.eot?52m981');
      	src: url('../assets/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
      		   url('../assets/fonts/icon.woff?52m981')
               format('woff'),
      		   url('../assets/fonts/icon.ttf?52m981')
               format('truetype'),
      		   url('../assets/fonts/icon.svg?52m981#icon')
               format('svg');
      	font-weight: normal;
      	font-style: normal;
      }
    </style>
    <link rel="stylesheet" href="../assets/stylesheets/application-54f87043f3.css">
    
    
      
      
      
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu+Mono">
      <style>
        body, input {
          font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
        }
        pre, code {
          font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
        }
      </style>
    
    
    <script src="../assets/javascripts/modernizr-4ab42b99fd.js"></script>
    
  </head>
  
  
  
  <body class=" ">
    
      
      
        
      
    
    <div class="backdrop">
      <div class="backdrop-paper"></div>
    </div>
    <input class="toggle" type="checkbox" id="toggle-drawer">
    <input class="toggle" type="checkbox" id="toggle-search">
    <label class="toggle-button overlay" for="toggle-drawer"></label>
    <header class="header">
      <nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        
          <span class="path">
            
              
                Getting Started <i class="icon icon-link"></i>
              
            
          </span>
        
        Developer Guide
      </div>
    </div>
    
    
    <div class="button button-search" role="button" aria-label="Search">
      <label class="toggle-button icon icon-search" title="Search" for="toggle-search"></label>
    </div>
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
    </header>
    <main class="main">
      
      <div class="drawer">
        <nav aria-label="Navigation">
  
  <a href="https://github.com/Jumpercables/Wave/" class="project">
    <div class="banner">
      
      <div class="name">
        <strong>
          Wave
          <span class="version">
            
          </span>
        </strong>
        
          <br>
          Jumpercables/Wave
        
      </div>
    </div>
  </a>
  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            
            <a href="https://github.com/Jumpercables/Wave//archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/Jumpercables/Wave//stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      
      <div class="toc">
        <ul>
          
            
  <li>
    <span class="section">Getting Started</span>
    <ul>
      
        
  <li>
    <a class="" title="Overview" href="..">
      Overview
    </a>
    
  </li>

      
        
  <li>
    <a class="current" title="Developer Guide" href="./">
      Developer Guide
    </a>
    
      
        
      
      
        <ul>
          
            <li class="anchor">
              <a title="Licenses" href="#licenses">
                Licenses
              </a>
            </li>
          
            <li class="anchor">
              <a title="Geodatabase Connections" href="#geodatabase-connections">
                Geodatabase Connections
              </a>
            </li>
          
            <li class="anchor">
              <a title="Disabling Auto Updaters" href="#disabling-auto-updaters">
                Disabling Auto Updaters
              </a>
            </li>
          
            <li class="anchor">
              <a title="Layers" href="#layers">
                Layers
              </a>
            </li>
          
            <li class="anchor">
              <a title="Tables" href="#tables">
                Tables
              </a>
            </li>
          
            <li class="anchor">
              <a title="Session / Workflow Manager" href="#session-workflow-manager">
                Session / Workflow Manager
              </a>
            </li>
          
        </ul>
      
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <a class="" title="Features" href="../features/">
      Features
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Frequently Asked Questions" href="../faq/">
      Frequently Asked Questions
    </a>
    
  </li>

          
            
  <li>
    <span class="section">About</span>
    <ul>
      
        
  <li>
    <a class="" title="Contributing" href="../contribute/">
      Contributing
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Release Notes" href="../release-notes/">
      Release Notes
    </a>
    
  </li>

      
    </ul>
  </li>

          
        </ul>
        
      </div>
    </div>
  </div>
</nav>
      </div>
      <article class="article">
        <div class="wrapper">
          
          <h1 id="developer-guide">Developer Guide</h1>
<p>This will serve as a reference guide for developer samples, the purpose of the samples is to provide example usages of the extensions that are provided in the <strong>Wave Extensions for ArcGIS</strong> and <strong>Wave Extensions for ArcFM</strong> packages.</p>
<ul>
<li>Not all of the features in the <strong>Wave</strong> project will be included in the samples. If you would like a sample of a feature please add a suggestion in the GitHub <a href="https://github.com/Jumpercables/Wave/issues">issue tracker</a>.</li>
</ul>
<h2 id="licenses">Licenses</h2>
<p>When a stand-alone executable needs to access and use geodatabase objects, a license must be checked out, depending on the product that has been installed.</p>
<h3 id="arcgis-for-desktop">ArcGIS for Desktop</h3>
<p>The following snippets shows the proper way to check out licenses when working with the ArcGIS for Desktop product.</p>
<pre><code class="java">private void CheckoutLicenses(esriLicenseProductCode esriLicenseProductCode)
{
  using (var lic = new EsriRuntimeAuthorization())
  {
    if (lic.Initialize(esriLicenseProductCode))
    {
      Console.WriteLine(&quot;Successfully checked-out the {0} license.&quot;, esriLicenseProductCode);
    }
    else
    {
      Console.WriteLine(&quot;Unable to check-out the {0} license.&quot;, esriLicenseProductCode);
    }
  }            
}
</code></pre>

<h3 id="arcfm-solution">ArcFM Solution</h3>
<p>The following snippet shows the proper way to check out licenses when working with the ArcFM Solution and ArcGIS for Desktop products.</p>
<pre><code class="java">private void CheckoutLicenses(esriLicenseProductCode esriLicenseProductCode, mmLicensedProductCode mmLicensedProductCode)
{
  using (var lic = new RuntimeAuthorization(ProductCode.Desktop))
  {
    if (lic.Initialize(esriLicenseProductCode, mmLicensedProductCode))
    {
      Console.WriteLine(&quot;Successfully checked-out the {0} and {1} licenses.&quot;, esriLicenseProductCode, mmLicensedProductCode);
    }
    else
    {
      Console.WriteLine(&quot;Unable to check-out the {0} and/or {1} license.&quot;, esriLicenseProductCode, mmLicensedProductCode);
    }
  }
}
</code></pre>

<ul>
<li>When the ArcFM Solution has been installed and configured in the geodatabase, a license to both the ArcFM Solution and ArcGIS for Desktop is required.</li>
</ul>
<h2 id="geodatabase-connections">Geodatabase Connections</h2>
<p>The <code>WorkspaceFactories</code> static class will return the proper workspace (<code>sde</code>, <code>gdb</code>, or <code>mdb</code>) based on the connection file parameter.</p>
<pre><code class="java">var connectionFile = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData), &quot;\\ESRI\\Desktop\\ArCatalog\\Minerville.gdb&quot;);
var workspace = WorkspaceFactories.Open(connectionFile);
var dbms = workspace.GetDBMS();
</code></pre>

<h2 id="disabling-auto-updaters">Disabling Auto Updaters</h2>
<p>There are cases when a <strong>custom</strong> ArcFM Auto Updater (AU) has been developed needs to temporarily <code>disable</code> subsequent calls.</p>
<pre><code class="java">using (new AutoUpdaterModeReverter(mmAutoUpdaterMode.mmAUMNoEvents))
{
    // All of the ArcFM Auto Updaters are now disabled.
}
</code></pre>

<h2 id="layers">Layers</h2>
<p>The feature layers in the map can be traverse using the <code>Where</code> method extension.</p>
<pre><code class="java">var layers = ArcMap.Application.GetActiveMap().Where(layer =&gt; layer.Valid);
var structures = layers.Where(layer =&gt; layer.FeatureClass.IsAssignedClassModelName(&quot;STRUCTURE&quot;));
</code></pre>

<h2 id="tables">Tables</h2>
<p>The tables in the map can be traverse using the <code>Where</code> method extension.</p>
<pre><code class="java">var tables = ArcMap.Application.GetActiveMap().GetTables(table =&gt; table.Valid);
var arcfm = tables.Where(table=&gt; table.IsAssignedClassModelName(&quot;ARCFMSYSTEMTABLE&quot;));
</code></pre>

<h2 id="session-workflow-manager">Session / Workflow Manager</h2>
<p>The Session Manager and Workflow Manager extensions to the ArcFM Solution are tightly coupled with the version management solution provided by the product.</p>
<h3 id="session-design-additions">Session / Design Additions</h3>
<p>When using Session Manager or Workflow Manager you often need to extend the ArcFM Solution Session or Design or Work Request to store client specific data, which can now be done by extending the <code>Session</code>, <code>Design</code> or <code>WorkRequest</code> classes.</p>
<pre><code class="java">public class ClientSession : Session {

  public ClientSession(IMMPxApplication pxApp)
    : base(pxApp) {

  }

  public ClientSession(IMMPxApplication pxApp, int id)
    : base(pxApp, id) {

  }

  public string ClientName {get; set;}

  protected override bool Initialize(IMMSessionManager extension, int nodeID){

    if(!base.Initialize(extension, nodeID))
      return false;

    var tableName = base.Application.GetQualifiedTableName(&quot;CLIENT_SESSION&quot;);
    var commandText = string.Format(&quot;SELECT name FROM {0} WHERE session_id = {1}&quot;,
                                      tableName, nodeID);
    this.ClientName = base.Application.ExecuteScalar(commandText, &quot;&lt;null&gt;&quot;);

    return true;
  }

  protected override bool Initialize(IMMSessionManager extension, IMMPxUser user) {

    if(!base.Initialize(extension, user))
      return;

    var tableName = base.Application.GetQualifiedTableName(&quot;CLIENT_SESSION&quot;);
    var commandText = string.Format(&quot;INSERT INTO {0} VALUES({1},'{2}')&quot;,
                                      tableName, base.ID, this.ClientName);
    int recordsAffected = base.Application.ExecuteNonQuery(commandText);
    return recordsAffected == 1;
  }
}
</code></pre>

<h3 id="session-design-accessors">Session / Design Accessors</h3>
<p>When using Session Manager or Workflow Manager you will undoubtedly need to access the currently open session or design. The easiest way to access the data is through the <code>GetSession</code>, <code>GetWorkRequest</code> or <code>GetDesign</code> methods on the <code>IMMPxApplication</code> interface.</p>
<pre><code class="java">var pxApplication = ArcMap.Application.GetPxApplication();
var session = pxApplication.GetSession();
var design = pxApplication.GetDesign();
var request = pxApplication.GetWorkRequest();
</code></pre>

<ul>
<li>If you have extended the <code>Session</code>, <code>WorkRequest</code> or <code>Design</code>, you can access it via the <code>action</code> parameter.</li>
</ul>
<pre><code class="java">var pxApplication = ArcMap.Application.GetPxApplication();
var session = pxApplication.GetSession((id, source) =&gt; new ClientSession(source, id))
</code></pre>
          <aside class="copyright" role="note">
            
            Documentation built with
            <a href="http://www.mkdocs.org" target="_blank">MkDocs</a>
            using the
            <a href="http://squidfunk.github.io/mkdocs-material/" target="_blank">
              Material
            </a>
            theme.
          </aside>
          
            <footer class="footer">
              
  <nav class="pagination" aria-label="Footer">
    <div class="previous">
      
        <a href=".." title="Overview">
          <span class="direction">
            Previous
          </span>
          <div class="page">
            <div class="button button-previous" role="button" aria-label="Previous">
              <i class="icon icon-back"></i>
            </div>
            <div class="stretch">
              <div class="title">
                Overview
              </div>
            </div>
          </div>
        </a>
      
    </div>
    <div class="next">
      
        <a href="../features/" title="Features">
          <span class="direction">
            Next
          </span>
          <div class="page">
            <div class="stretch">
              <div class="title">
                Features
              </div>
            </div>
            <div class="button button-next" role="button" aria-label="Next">
              <i class="icon icon-forward"></i>
            </div>
          </div>
        </a>
      
    </div>
  </nav>

            </footer>
          
        </div>
      </article>
      <div class="results" role="status" aria-live="polite">
        <div class="scrollable">
          <div class="wrapper">
            <div class="meta"></div>
            <div class="list"></div>
          </div>
        </div>
      </div>
    </main>
    <script>
      var base_url = '..';
      var repo_id  = 'Jumpercables/Wave';
    </script>
    <script src="../assets/javascripts/application-997097ee0c.js"></script>
    
    
  </body>
</html>