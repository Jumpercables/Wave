<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Kyle Baesler">
  
  <title>Developer Guide - Wave</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Developer Guide";
    var mkdocs_page_input_path = "guide.md";
    var mkdocs_page_url = "/guide/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Wave</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <ul class="subnav">
    <li><span>Getting Started</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="..">Overview</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Developer Guide</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#developer-guide">Developer Guide</a></li>
                
                    <li><a class="toctree-l4" href="#licenses">Licenses</a></li>
                
                    <li><a class="toctree-l4" href="#geodatabase-connections">Geodatabase Connections</a></li>
                
                    <li><a class="toctree-l4" href="#disabling-auto-updaters">Disabling Auto Updaters</a></li>
                
                    <li><a class="toctree-l4" href="#layers">Layers</a></li>
                
                    <li><a class="toctree-l4" href="#tables">Tables</a></li>
                
                    <li><a class="toctree-l4" href="#session-workflow-manager">Session / Workflow Manager</a></li>
                
            
            </ul>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../features/">Features</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../faq/">Frequently Asked Questions</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>About</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../contribute/">Contributing</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../release-notes/">Release Notes</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Wave</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Getting Started &raquo;</li>
        
      
    
    <li>Developer Guide</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/Jumpercables/Wave/" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="developer-guide">Developer Guide</h1>
<p>This will serve as a reference guide for developer samples, the purpose of the samples is to provide example usages of the extensions that are provided in the <strong>Wave Extensions for ArcGIS</strong> and <strong>Wave Extensions for ArcFM</strong> packages.</p>
<ul>
<li>Not all of the features in the <strong>Wave</strong> project will be included in the samples. If you would like a sample of a feature please add a suggestion in the GitHub <a href="https://github.com/Jumpercables/Wave/issues">issue tracker</a>.</li>
</ul>
<h2 id="licenses">Licenses</h2>
<p>When a stand-alone executable needs to access and use geodatabase objects, a license must be checked out, depending on the product that has been installed.</p>
<h3 id="arcgis-for-desktop">ArcGIS for Desktop</h3>
<p>The following snippets shows the proper way to check out licenses when working with the ArcGIS for Desktop product.</p>
<pre><code class="java">private void CheckoutLicenses(esriLicenseProductCode esriLicenseProductCode)
{
  using (var lic = new EsriRuntimeAuthorization())
  {
    if (lic.Initialize(esriLicenseProductCode))
    {
      Console.WriteLine(&quot;Successfully checked-out the {0} license.&quot;, esriLicenseProductCode);
    }
    else
    {
      Console.WriteLine(&quot;Unable to check-out the {0} license.&quot;, esriLicenseProductCode);
    }
  }            
}
</code></pre>

<h3 id="arcfm-solution">ArcFM Solution</h3>
<p>The following snippet shows the proper way to check out licenses when working with the ArcFM Solution and ArcGIS for Desktop products.</p>
<pre><code class="java">private void CheckoutLicenses(esriLicenseProductCode esriLicenseProductCode, mmLicensedProductCode mmLicensedProductCode)
{
  using (var lic = new RuntimeAuthorization(ProductCode.Desktop))
  {
    if (lic.Initialize(esriLicenseProductCode, mmLicensedProductCode))
    {
      Console.WriteLine(&quot;Successfully checked-out the {0} and {1} licenses.&quot;, esriLicenseProductCode, mmLicensedProductCode);
    }
    else
    {
      Console.WriteLine(&quot;Unable to check-out the {0} and/or {1} license.&quot;, esriLicenseProductCode, mmLicensedProductCode);
    }
  }
}
</code></pre>

<ul>
<li>When the ArcFM Solution has been installed and configured in the geodatabase, a license to both the ArcFM Solution and ArcGIS for Desktop is required.</li>
</ul>
<h2 id="geodatabase-connections">Geodatabase Connections</h2>
<p>The <code>WorkspaceFactories</code> static class will return the proper workspace (<code>sde</code>, <code>gdb</code>, or <code>mdb</code>) based on the connection file parameter.</p>
<pre><code class="java">var connectionFile = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData), &quot;\\ESRI\\Desktop\\ArCatalog\\Minerville.gdb&quot;);
var workspace = WorkspaceFactories.Open(connectionFile);
var dbms = workspace.GetDBMS();
</code></pre>

<h2 id="disabling-auto-updaters">Disabling Auto Updaters</h2>
<p>There are cases when a <strong>custom</strong> ArcFM Auto Updater (AU) has been developed needs to temporarily <code>disable</code> subsequent calls.</p>
<pre><code class="java">using (new AutoUpdaterModeReverter(mmAutoUpdaterMode.mmAUMNoEvents))
{
    // All of the ArcFM Auto Updaters are now disabled.
}
</code></pre>

<h2 id="layers">Layers</h2>
<p>The feature layers in the map can be traverse using the <code>Where</code> method extension.</p>
<pre><code class="java">var layers = ArcMap.Application.GetActiveMap().Where(layer =&gt; layer.Valid);
var structures = layers.Where(layer =&gt; layer.FeatureClass.IsAssignedClassModelName(&quot;STRUCTURE&quot;));
</code></pre>

<h2 id="tables">Tables</h2>
<p>The tables in the map can be traverse using the <code>Where</code> method extension.</p>
<pre><code class="java">var tables = ArcMap.Application.GetActiveMap().GetTables(table =&gt; table.Valid);
var arcfm = tables.Where(table=&gt; table.IsAssignedClassModelName(&quot;ARCFMSYSTEMTABLE&quot;));
</code></pre>

<h2 id="session-workflow-manager">Session / Workflow Manager</h2>
<p>The Session Manager and Workflow Manager extensions to the ArcFM Solution are tightly coupled with the version management solution provided by the product.</p>
<h3 id="session-design-additions">Session / Design Additions</h3>
<p>When using Session Manager or Workflow Manager you often need to extend the ArcFM Solution Session or Design or Work Request to store client specific data, which can now be done by extending the <code>Session</code>, <code>Design</code> or <code>WorkRequest</code> classes.</p>
<pre><code class="java">public class ClientSession : Session {

  public ClientSession(IMMPxApplication pxApp)
    : base(pxApp) {

  }

  public ClientSession(IMMPxApplication pxApp, int id)
    : base(pxApp, id) {

  }

  public string ClientName {get; set;}

  protected override bool Initialize(IMMSessionManager extension, int nodeID){

    if(!base.Initialize(extension, nodeID))
      return false;

    var tableName = base.Application.GetQualifiedTableName(&quot;CLIENT_SESSION&quot;);
    var commandText = string.Format(&quot;SELECT name FROM {0} WHERE session_id = {1}&quot;,
                                      tableName, nodeID);
    this.ClientName = base.Application.ExecuteScalar(commandText, &quot;&lt;null&gt;&quot;);

    return true;
  }

  protected override bool Initialize(IMMSessionManager extension, IMMPxUser user) {

    if(!base.Initialize(extension, user))
      return;

    var tableName = base.Application.GetQualifiedTableName(&quot;CLIENT_SESSION&quot;);
    var commandText = string.Format(&quot;INSERT INTO {0} VALUES({1},'{2}')&quot;,
                                      tableName, base.ID, this.ClientName);
    int recordsAffected = base.Application.ExecuteNonQuery(commandText);
    return recordsAffected == 1;
  }
}
</code></pre>

<h3 id="session-design-accessors">Session / Design Accessors</h3>
<p>When using Session Manager or Workflow Manager you will undoubtedly need to access the currently open session or design. The easiest way to access the data is through the <code>GetSession</code>, <code>GetWorkRequest</code> or <code>GetDesign</code> methods on the <code>IMMPxApplication</code> interface.</p>
<pre><code class="java">var pxApplication = ArcMap.Application.GetPxApplication();
var session = pxApplication.GetSession();
var design = pxApplication.GetDesign();
var request = pxApplication.GetWorkRequest();
</code></pre>

<ul>
<li>If you have extended the <code>Session</code>, <code>WorkRequest</code> or <code>Design</code>, you can access it via the <code>action</code> parameter.</li>
</ul>
<pre><code class="java">var pxApplication = ArcMap.Application.GetPxApplication();
var session = pxApplication.GetSession((id, source) =&gt; new ClientSession(source, id))
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../features/" class="btn btn-neutral float-right" title="Features">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href=".." class="btn btn-neutral" title="Overview"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/Jumpercables/Wave/" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href=".." style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../features/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
